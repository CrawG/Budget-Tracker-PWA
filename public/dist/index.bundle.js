(()=>{var e={192:e=>{var t,n=indexedDB.open("budget",1);function o(){var e=t.transaction(["pending"],"readwrite").objectStore("pending").getAll();e.onsuccess=function(){e.result.length>0&&fetch("/api/transaction/bulk",{method:"POST",body:JSON.stringify(e.result),headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(){t.transaction(["pending"],"readwrite").objectStore("pending").clear()}))}}n.onupgradeneeded=function(e){e.target.result.createObjectStore("pending",{autoIncrement:!0})},n.onerror=function(e){console.log("Whoops! "+e.target.errorCode)},n.onsuccess=function(e){t=e.target.result,navigator.onLine&&o()},e.exports={checkDatabase:o,saveRecord:function(e){t.transaction(["pending"],"readwrite").objectStore("pending").add(e)}}}},t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={exports:{}};return e[o](r,r.exports,n),r.exports}(()=>{var e=n(192);window.addEventListener("online",e.checkDatabase);var t,o=[];function r(){var e=o.reduce((function(e,t){return e+parseInt(t.value)}),0);document.querySelector("#total").textContent=e}function a(){var e=document.querySelector("#tbody");e.innerHTML="",o.forEach((function(t){var n=document.createElement("tr");n.innerHTML="\n      <td>".concat(t.name,"</td>\n      <td>").concat(t.value,"</td>\n    "),e.appendChild(n)}))}function c(){var e=o.slice().reverse(),n=0,r=e.map((function(e){var t=new Date(e.date);return"".concat(t.getMonth()+1,"/").concat(t.getDate(),"/").concat(t.getFullYear())})),a=e.map((function(e){return n+=parseInt(e.value)}));t&&t.destroy();var c=document.getElementById("myChart").getContext("2d");t=new Chart(c,{type:"line",data:{labels:r,datasets:[{label:"Total Over Time",fill:!0,backgroundColor:"#6666ff",data:a}]}})}function i(t){var n=document.querySelector("#t-name"),i=document.querySelector("#t-amount"),u=document.querySelector(".form .error");if(""!==n.value&&""!==i.value){u.textContent="";var d={name:n.value,value:i.value,date:(new Date).toISOString()};t||(d.value*=-1),o.unshift(d),c(),a(),r(),fetch("/api/transaction",{method:"POST",body:JSON.stringify(d),headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){e.errors?u.textContent="Missing Information":(n.value="",i.value="")})).catch((function(t){e.saveRecord(d),n.value="",i.value=""}))}else u.textContent="Missing Information"}fetch("/api/transaction").then((function(e){return e.json()})).then((function(e){o=e,r(),a(),c()})),document.querySelector("#add-btn").onclick=function(){i(!0)},document.querySelector("#sub-btn").onclick=function(){i(!1)}})()})();